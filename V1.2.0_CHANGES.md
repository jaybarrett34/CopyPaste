# CopyPaste v1.2.0 - Changes Summary

## Overview
This version reverts Windows 11 porting attempts and adds proper cross-platform support for **macOS and Linux only**, along with a new **Settings UI** for customizable keyboard shortcuts.

---

## ğŸ¯ What Changed

### 1. âœ… Removed Windows Support
- **Removed** Windows build targets from `package.json`
- **Cleaned up** `PlatformAdapter.js` to focus on macOS and Linux only
- **Simplified** platform detection (darwin vs linux)
- **Result**: Leaner codebase focused on Unix-like platforms

### 2. âœ… Enhanced Cross-Platform Support (macOS + Linux)
- **macOS**: Native vibrancy effects, content protection
- **Linux**: Transparency support, frameless windows
- **Platform Adapter**: Clean abstraction layer for platform differences
  - Window options (vibrancy vs transparency)
  - Shortcut formatting (âŒ˜ vs Ctrl)
  - Icon paths (.icns vs .png)

### 3. âœ… Settings UI with Glass Morphism
- **New Component**: `Settings.jsx` with matching glass aesthetic
- **Features**:
  - Beautiful glass morphism modal overlay
  - Keyboard shortcut rebinding with live recording
  - Visual feedback during shortcut capture
  - Reset to defaults button
  - Dark/light mode support
- **Files Added**:
  - `src/components/Settings.jsx`
  - `src/components/Settings.css`

### 4. âœ… Rebindable Keyboard Shortcuts
- **All shortcuts are now customizable**:
  - Start/Stop Typing (default: `âŒ˜âŒ¥V`)
  - Pause/Resume (default: `âŒ˜â‡§P`)
  - Move Window Up/Down/Left/Right (default: `âŒ˜âŒ¥â†â†‘â†’â†“`)
  
- **How It Works**:
  1. Click the âš™ settings button in expanded mode
  2. Click "Edit" next to any shortcut
  3. Press your desired key combination
  4. Settings auto-save and shortcuts update immediately

### 5. âœ… Settings Persistence
- **Saved to**: `~/Library/Application Support/CopyPaste/settings.json` (macOS)
- **Saved to**: `~/.config/CopyPaste/settings.json` (Linux)
- **What's Saved**: Keyboard shortcuts configuration
- **Auto-loads**: On app startup
- **Auto-saves**: On every shortcut change

### 6. âœ… Dynamic Shortcut Registration
- Shortcuts now register dynamically based on user preferences
- No need to restart app when changing shortcuts
- Safe error handling prevents app crashes from invalid shortcuts

---

## ğŸ“ Files Modified

### Core Files
- **`package.json`**: 
  - Version bumped to 1.2.0
  - Removed Windows build targets
  - Kept macOS (.dmg, .zip) and Linux (.AppImage, .deb) targets

- **`src/main.js`**:
  - Added `shortcuts` state object
  - Added `loadSettings()` and `saveSettings()` functions
  - Made `registerGlobalShortcuts()` dynamic
  - Added IPC handlers: `get-shortcuts`, `update-shortcuts`
  - Added error handling for shortcut registration

- **`src/preload.js`**:
  - Added `getShortcuts()` IPC method
  - Added `updateShortcuts()` IPC method

### UI Components
- **`src/App.jsx`**:
  - Added Settings component import
  - Added shortcuts state management
  - Added settings modal toggle
  - Added settings button (âš™) to expanded UI
  - Added shortcut change handler

- **`src/App.css`**:
  - Added `.settings-btn` styles
  - Hover animation (rotate 45deg on hover)

### Platform Support
- **`src/platform/PlatformAdapter.js`**:
  - Removed all Windows-specific code
  - Simplified to macOS/Linux only
  - Added `isMacOS()` and `isLinux()` helper methods
  - Updated comments to reflect Linux-only alternative to macOS

### New Files
- **`src/components/Settings.jsx`**: Full-featured settings modal
- **`src/components/Settings.css`**: Beautiful glass morphism styling

---

## ğŸ¨ UI/UX Improvements

### Settings Button
- Located on the right side of the expanded control bar
- Gear icon (âš™) that rotates 45Â° on hover
- Opens glass morphism settings modal

### Settings Modal
- **Overlay**: Semi-transparent backdrop with blur
- **Surface**: Glass morphism matching main window aesthetic
- **Animation**: Smooth fade-in and slide-up entrance
- **Layout**:
  - Header with close button (âœ•)
  - Shortcut list with edit buttons
  - Recording indicator (blue glow) when capturing keys
  - Footer with "Reset to Defaults" and "Done" buttons

### Shortcut Recording Experience
1. Click "Edit" next to any shortcut
2. Field highlights in blue with "Press keys..." text
3. Press your desired key combination
4. Keys appear in real-time (e.g., "CommandOrControl+Alt+T")
5. Release keys to confirm
6. Settings auto-save and shortcuts update immediately

---

## ğŸ§ª Testing Notes

### Build Status
- âœ… **Vite Build**: Successful (1.66s)
- âœ… **Code Compilation**: No linter errors
- âš ï¸ **electron-builder**: Requires platform-specific build environment
  - macOS: Build on macOS with Xcode tools
  - Linux: Build on Linux with build-essential

### Testing Checklist for User
- [ ] Test Settings UI opens/closes correctly
- [ ] Try rebinding each shortcut type
- [ ] Verify shortcuts persist after app restart
- [ ] Test "Reset to Defaults" button
- [ ] Confirm shortcuts work on both macOS and Linux
- [ ] Verify glass morphism styling in light/dark modes
- [ ] Test edge cases (invalid shortcuts, conflicts, etc.)

---

## ğŸ”„ Migration from v1.1.0

### Breaking Changes
**None** - All v1.1.0 features are preserved:
- âœ… Temperature slider (0-100%)
- âœ… Pause multiplier slider (0-100%)
- âœ… WPM accuracy (10-900)
- âœ… Glass morphism UI
- âœ… Dynamic window resizing

### New Default Behavior
- First launch: Uses default shortcuts
- Subsequent launches: Loads saved shortcuts from `settings.json`

### If Upgrading from v1.1.0
1. Shortcuts will use defaults on first launch of v1.2.0
2. Customize them via Settings UI (âš™ button)
3. They'll persist from then on

---

## ğŸ“š Architecture Changes

### Settings Flow
```
User clicks Edit â†’ Settings.jsx records keys â†’ 
App.jsx updates state â†’ IPC to main.js â†’ 
saveSettings() writes JSON â†’ registerGlobalShortcuts() re-registers
```

### File Persistence
```javascript
// Location: ~/Library/Application Support/CopyPaste/settings.json
{
  "shortcuts": {
    "startStop": "CommandOrControl+Alt+V",
    "pauseResume": "CommandOrControl+Shift+P",
    "moveUp": "CommandOrControl+Alt+Up",
    "moveDown": "CommandOrControl+Alt+Down",
    "moveLeft": "CommandOrControl+Alt+Left",
    "moveRight": "CommandOrControl+Alt+Right"
  }
}
```

---

## ğŸš€ How to Build

### Development
```bash
# Install dependencies
npm install

# Terminal 1: Start Vite dev server
npm run dev

# Terminal 2: Start Electron
npm run electron
```

### Production Build

#### macOS (on macOS)
```bash
npm run build
npm run package
# Output: release/CopyPaste-1.2.0-arm64.dmg
#         release/CopyPaste-1.2.0.dmg (Intel)
```

#### Linux (on Linux)
```bash
npm run build
npm run package
# Output: release/CopyPaste-1.2.0-x86_64.AppImage
#         release/CopyPaste_1.2.0_amd64.deb
```

---

## ğŸ¯ Design Philosophy Maintained

- âœ… **Minimal UI** - Settings hidden until needed
- âœ… **Glass Morphism** - Consistent aesthetic throughout
- âœ… **AHK-Style Simplicity** - Just works, no complexity
- âœ… **Cross-Platform** - macOS and Linux (Unix-like systems)
- âœ… **No Logging** - Silent error handling, no crashes
- âœ… **Direct Approach** - No unnecessary abstractions

---

## ğŸ”® Future Enhancement Ideas

### Settings Expansion
- [ ] WPM presets (Slow/Normal/Fast/Instant buttons)
- [ ] Default temperature/pause values
- [ ] Auto-start on login preference
- [ ] Theme selection (force light/dark)

### Advanced Features
- [ ] Shortcut conflict detection
- [ ] Import/export settings
- [ ] Multiple shortcut profiles
- [ ] Hotkey to toggle settings modal

---

## ğŸ“ Summary

**v1.2.0** delivers on the user's request to:
1. âœ… Revert Windows 11 porting (removed all Windows-specific code)
2. âœ… Add proper Linux cross-platform support (maintained clean abstraction)
3. âœ… Implement settings UI for rebinding shortcuts (beautiful glass modal)
4. âœ… Preserve glass component structure and general flow (100% maintained)

**The app is now ready for macOS and Linux users with fully customizable keyboard shortcuts!** ğŸ‰

---

**Version**: 1.2.0  
**Date**: October 21, 2025  
**Status**: âœ… Complete and Ready for Testing
